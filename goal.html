<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Thomas Delaney è¿›çƒçºªå½•</title>
    <style>
        .goal-item video {
            width: 100%;
            aspect-ratio: 16 / 9;
            border-radius: 8px;
            background: #000;
            cursor: pointer;
            outline: none;
            object-fit: cover;
        }


        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial,
                sans-serif;
            background-color: #fff;
            color: #000;
            line-height: 1.6;
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 18px 40px;
            background-color: #003DA5;
            color: white;
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .logo {
            font-size: 1.2rem;
            font-weight: bold;
        }

        nav a {
            margin-left: 24px;
            text-decoration: none;
            color: white;
            font-weight: 500;
            transition: opacity 0.3s;
        }

        nav a:hover {
            opacity: 0.7;
        }

        .goal-videos {
            max-width: 1200px;
            margin: 40px auto;
            padding: 0 20px;
        }

        .goal-videos .section-title {
            font-size: 1.8rem;
            font-weight: 600;
            color: #003DA5;
            margin-bottom: 20px;
            user-select: none;
        }

        .goal-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
        }

        .goal-item {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            padding: 10px;
            text-align: center;
            user-select: none;
        }

        .goal-item video {
            width: 100%;
            height: auto;
            border-radius: 8px;
            background: #000;
            cursor: pointer;
            outline: none;
            object-fit: cover;
        }

        .goal-time,
        .goal-opponent {
            margin-top: 10px;
            font-size: 1rem;
            color: #003DA5;
            font-weight: 600;
            cursor: pointer;
            display: inline-block;
            text-decoration: underline;
        }

        .goal-time:hover,
        .goal-opponent:hover {
            opacity: 0.8;
        }

        /* å¼¹çª—èƒŒæ™¯é®ç½© */
        #videoModal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background-color: rgba(0, 0, 0, 0.75);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 2000;
        }

        /* å¼¹çª—å†…å®¹ */
        #videoModalContent {
            position: relative;
            width: 80vw;
            max-width: 900px;
            background-color: #000;
            border-radius: 12px;
            box-shadow: 0 0 20px rgba(0, 61, 165, 0.8);
        }

        #videoModalContent video {
            width: 100%;
            height: auto;
            border-radius: 12px;
            display: block;
        }

        /* å…³é—­æŒ‰é’® */
        #modalCloseBtn {
            position: absolute;
            top: 8px;
            right: 12px;
            font-size: 28px;
            color: white;
            cursor: pointer;
            font-weight: bold;
            user-select: none;
            padding: 4px 10px;
            background-color: rgba(0, 61, 165, 0.9);
            border-radius: 6px;
            transition: background-color 0.3s ease;
        }

        #modalCloseBtn:hover {
            background-color: rgba(0, 30, 90, 0.9);
        }
    </style>
</head>

<body>
    <script src="config.js"></script>
    <header>
        <div class="logo">ğŸ‡©ğŸ‡° Thomas Delaney</div>
        <nav>
            <a href="index.html">é¦–é¡µ</a>
            <a href="kit.html">èµ›å­£å›é¡¾</a>
            <a href="stat.html">ç»Ÿè®¡æ•°æ®</a>
            <a href="goal.html">è¿›çƒçºªå½•</a>
        </nav>
    </header>

    <section class="goal-videos">
        <div class="section-title">è¿›çƒçºªå½•</div>
        <div class="goal-grid" id="goalGrid">
            <!-- JS åŠ¨æ€ç”Ÿæˆè§†é¢‘åˆ—è¡¨ -->
        </div>
    </section>

    <!-- è§†é¢‘é¢„è§ˆå¼¹çª— -->
    <div id="videoModal">
        <div id="videoModalContent">
            <span id="modalCloseBtn">&times;</span>
            <video id="modalVideo" controls autoplay></video>
        </div>
    </div>

    <script>
        // å¯é…ç½®çš„è§†é¢‘åŸºè·¯å¾„ï¼Œéƒ¨ç½²åˆ°äº‘å­˜å‚¨åå°†å…¶æ”¹ä¸ºå…¬ç½‘URLï¼Œä¾‹å¦‚ï¼š
        // const VIDEO_BASE = 'https://pub-xxxxxxxxxxxxxxxxxxxx.r2.dev/';
        const VIDEO_BASE = window.VIDEO_BASE || 'goal_video/';

        const videoFiles = [
            "2019.5.11-F. DÃ¼sseldorf-æœå¡å°”å¤šå¤«.MOV",
            "2021.9.7-Israel-ä»¥è‰²åˆ—.mov",
            "2017.9.4-Armenia-äºšç¾å°¼äºš3çƒ.mp4",
            "2019.9.5-Gibraltar-ç›´å¸ƒç½—é™€.mov",
            "2019.3.16-Hertha BSC-æŸæ—èµ«å¡”.mp4",
            "2017.9.10-Hertha BSC-æŸæ—èµ«å¡”.mov",
            "2016.10.23-Odense BK-æ¬§æœ¬.MOV",
            "2011.5.16-AC Horsens-éœæ£®æ–¯.mp4",
            "2013.8.4-Randers FC-å…°è¾¾æ–¯.mp4",
            "2018.12.8-FC Schalke 04-æ²™å°”å…‹.MOV",
            "2016.9.27-Club Brugge-å¸ƒé²æ—¥.mov",
            "2022.3.13-Rayo Vallecano-å·´åˆ—å¡è¯º.MOV",
            "2021.7.3-Czech Republic-æ·å…‹.mov",
            "2021.1.30-FC Augsburg-å¥¥æ ¼æ–¯å ¡.mp4",
            "2016.9.18-AC Horsens-éœæ£®æ–¯.mp4",
            "2016.11.8-Aalborg BK-é˜¿å°”å ¡.mov",
            "2021.12.11-Athletic-æ¯•å°”å·´é„‚ç«æŠ€.mov",
            "2023.11.17-Slovenia-æ–¯æ´›æ–‡å°¼äºš.mov",
            "2023.12.1-KVC Westerlo-éŸ¦æ–¯ç‰¹é².mov",
            "2017.4.1-SC Freiburg-å¼—èµ–å ¡3çƒ.mp4",
            "2024.7.29-Aarhus GF-å¥¥èƒ¡æ–¯.mov",
            "2018.4.29-Dortmund-å¤šç‰¹è’™å¾·.mov",
            "2018.3.2-M'gladbach-é—¨å…´.mov",
            "2024.12.7-Kolding IF-ç§‘çµ.MOV",
            "2015.8.2-SÃ¶nderjyske-æ¡‘å¾·æ·æ–¯åŸº.mp4",
            "2015.8.23-Aarhus GF -å¥¥èƒ¡æ–¯.mp4",
            "2016.4.24-Viborg FF-ç»´å ¡.mp4",
            "2016.7.27-Astra Giurgiu-é˜¿æ–¯ç‰¹æ‹‰ï¼ˆç½—é©¬å°¼äºšï¼‰.mp4",
            "2016.7.16-Lyngby BK-çµæ¯”.mp4",
            "2016.7.23-Esbjerg fB-åŸƒæ–¯æ¯”çº¦.mp4",
            "2016.5.29-Aarhus GF-å¥¥èƒ¡æ–¯.mp4",
            "2016.5.1-FC Midtjylland-ä¸­æ—¥å¾·å…°.mp4",
            "2016.4.6-BrÃ¸ndby IF-å¸ƒéš†å¾·æ¯”.mp4",
            "2012.12.9-FC NordsjÃ¦lland-åŒ—è¥¿å…°.mp4",
            "2015.3.8-BrÃ¸ndby IF-å¸ƒéš†å¾·æ¯”.mp4",
            "2013.9.22-Odense BK-æ¬§æœ¬.mp4",
            "2014.12.4-Greve Fodbold-æ ¼é›·å¼—.mp4",
            "2014.5.4-BrÃ¸ndby IF-å¸ƒéš†å¾·æ¯”.mp4",
            "2015.5.11-VestsjÃ¦lland-è¥¿å¸Œå…°.mp4",
            "2017.2.18-FSV Mainz 05-ç¾å› èŒ¨.mov",
            "2016.11.6-SÃ¶nderjyske-æ¡‘å¾·æ·æ–¯åŸº.mov",
            "2024.12.3-Nordsjaelland-åŒ—è¥¿å…°.mov",
            "2017.9.1-Poland-æ³¢å…°.mov",
            "2025.2.18-Randers FC-å…°è¾¾æ–¯(Own Goal).mp4",
            "2009.7.22-Mogren-è«æ ¼ä¼¦.mp4",
            "2011.7.30-FC NordsjÃ¦lland-åŒ—è¥¿å…°.mp4",
            "2025.4.27-Aarhus GF-å¥¥èƒ¡æ–¯.mp4",
            "2025.5.12-FC Midtjylland-ä¸­æ—¥å¾·å…°.mp4",
        ];

        function parseFilename(filename) {
            const lastDashIndex = filename.lastIndexOf("-");
            const dotIndex = filename.lastIndexOf(".");
            if (lastDashIndex < 0 || dotIndex < 0) return null;

            const datePart = filename.split("-")[0];
            const chineseName = filename.substring(lastDashIndex + 1, dotIndex).trim();

            const dateParts = datePart.split(".");
            if (dateParts.length !== 3) return null;
            const year = parseInt(dateParts[0], 10);
            const month = parseInt(dateParts[1], 10);
            const day = parseInt(dateParts[2], 10);

            const dateObj = new Date(year, month - 1, day);

            return {
                filename,
                dateRaw: datePart,
                dateObj,
                chineseName,
                src: `${VIDEO_BASE}${filename}`,
            };
        }

        const videosData = videoFiles
            .map(parseFilename)
            .filter((v) => v !== null)
            .sort((a, b) => b.dateObj - a.dateObj);


        const goalGrid = document.getElementById("goalGrid");
        const videoModal = document.getElementById("videoModal");
        const modalVideo = document.getElementById("modalVideo");
        const modalCloseBtn = document.getElementById("modalCloseBtn");

        videosData.forEach((video) => {
            const item = document.createElement("div");
            item.className = "goal-item";

            const videoEl = document.createElement("video");
            videoEl.src = encodeURI(video.src);
            videoEl.preload = "metadata";
            videoEl.controls = false;
            videoEl.muted = true;
            videoEl.loop = true;
            videoEl.style.cursor = "pointer";
            videoEl.style.objectFit = "cover";

            // åŠ è½½å…ƒæ•°æ®åè·³åˆ°ä¸­é—´å¸§
            videoEl.addEventListener("loadedmetadata", () => {
                if (videoEl.duration && !isNaN(videoEl.duration)) {
                    videoEl.currentTime = videoEl.duration / 2;
                }
            });

            // è·³è½¬åæš‚åœï¼Œæ˜¾ç¤ºè¯¥å¸§
            videoEl.addEventListener("seeked", () => {
                videoEl.pause();
            });

            // é¼ æ ‡æ‚¬åœæ’­æ”¾ï¼Œç¦»å¼€æš‚åœå›ä¸­é—´å¸§
            videoEl.addEventListener("mouseenter", () => {
                videoEl.muted = true;
                videoEl.play();
            });
            videoEl.addEventListener("mouseleave", () => {
                videoEl.pause();
                videoEl.currentTime = videoEl.duration / 2;
            });

            // ç‚¹å‡»è§†é¢‘å¼¹çª—é¢„è§ˆï¼ˆè§£é™¤é™éŸ³ï¼‰
            videoEl.addEventListener("click", (e) => {
                e.preventDefault();
                modalVideo.src = encodeURI(video.src);
                modalVideo.currentTime = 0;
                modalVideo.muted = false;
                modalVideo.play();
                videoModal.style.display = "flex";
            });

            const dateLink = document.createElement("a");
            dateLink.textContent = video.dateRaw;
            dateLink.href = "detail.html?video=" + encodeURIComponent(video.filename);
            dateLink.className = "goal-time";
            dateLink.title = "æŸ¥çœ‹è¯¦æƒ…";

            const opponentLink = document.createElement("a");
            opponentLink.textContent = video.chineseName;
            opponentLink.href = "detail.html?video=" + encodeURIComponent(video.filename);
            opponentLink.className = "goal-opponent";
            opponentLink.title = "æŸ¥çœ‹è¯¦æƒ…";

            item.appendChild(videoEl);
            item.appendChild(dateLink);
            item.appendChild(document.createElement("br"));
            item.appendChild(opponentLink);
            goalGrid.appendChild(item);
        });

        // é¡µé¢åŠ è½½å®Œåï¼Œè‡ªåŠ¨è½®æµæ’­æ”¾æ¯ä¸ªè§†é¢‘ä¸­é—´å¸§é¢„è§ˆ
        window.addEventListener("load", () => {
            const videos = document.querySelectorAll(".goal-item video");
            let index = 0;

            function previewNext() {
                if (videos.length === 0) return;

                const currentVideo = videos[index];
                // æ’­æ”¾ä¸­é—´å¸§
                if (currentVideo.duration && !isNaN(currentVideo.duration)) {
                    currentVideo.currentTime = currentVideo.duration / 2;
                }
                currentVideo.muted = true;
                currentVideo.play();

                // é¢„è§ˆæ—¶é•¿1.5ç§’ï¼ˆå¯è°ƒæ•´ï¼‰
                setTimeout(() => {
                    currentVideo.pause();
                    if (currentVideo.duration && !isNaN(currentVideo.duration)) {
                        currentVideo.currentTime = currentVideo.duration / 2;
                    }
                    index = (index + 1) % videos.length;
                    setTimeout(previewNext, 500); // é—´éš”0.5ç§’åæ’­æ”¾ä¸‹ä¸€ä¸ª
                }, 1500);
            }

            previewNext();
        });

        modalCloseBtn.addEventListener("click", () => {
            modalVideo.pause();
            modalVideo.src = "";
            videoModal.style.display = "none";
        });


        videoModal.addEventListener("click", (e) => {
            if (e.target === videoModal) {
                modalVideo.pause();
                modalVideo.src = "";
                videoModal.style.display = "none";
            }
        });


    </script>
</body>

</html>